---
title: 'gqlgen で union・interface を使ってみた'
emoji: '🚥'
type: 'tech' # tech: 技術記事 / idea: アイデア
topics: []
published: false
---

# はじめに

GraphQL スキーマの一種である union と interface を gqlgen で実装してみました。

gqlgen を使って union や interface を実装した事例に関する情報があまりなかったので紹介します。

# gqlgen によって 生成される型

下記のような商品を一覧する Query の定義を例に挙げます。

```gql
extend type Query {
  "product の一覧を返す。limit/offset でページネーション可能。"
  products(limit: Int, offset: Int): Result!
}

union Result = ProductNodeList | ErrorNotUnauthorized | ErrorUnauthenticated

interface NodeList {
  count: Int!
  hasNext: Boolean!
}

"成功レスポンス"
type ProductNodeList implements NodeList {
  count: Int!
  hasNext: Boolean!
  products: [Product!]!
}

type Product {
  id: ID!
  age: Int!
  name: String!
}

interface Error {
  code: String!
  message: String!
}

"異常レスポンス - 認証エラー"
type ErrorNotUnauthorized implements Error {
  code: String!
  message: String!
}

"異常レスポンス - 認可エラー"
type ErrorUnauthenticated implements Error {
  code: String!
  message: String!
}
```

`query products` の返り値 `Result` は `ProductNodeList`、`ErrorNotUnauthorized`、`ErrorUnauthenticated` を返す union で定義されています。これらの型はすべて interface を実装しています。成功レスポンスは `Node` interface を、異常レスポンスの場合は `Error` interface を実装しています。

## union

## interface

# ユースケース

# おわりに
