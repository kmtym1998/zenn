---
title: 'gqlgen ã§ unionãƒ»interface ã‚’ä½¿ã£ã¦ã¿ãŸ'
emoji: 'ğŸš¥'
type: 'tech' # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: []
published: false
---

# ã¯ã˜ã‚ã«

GraphQL ã‚¹ã‚­ãƒ¼ãƒã®ä¸€ç¨®ã§ã‚ã‚‹ union ã¨ interface ã‚’ gqlgen ã§å®Ÿè£…ã—ã¦ã¿ã¾ã—ãŸã€‚

gqlgen ã‚’ä½¿ã£ã¦ union ã‚„ interface ã‚’å®Ÿè£…ã—ãŸäº‹ä¾‹ã«é–¢ã™ã‚‹æƒ…å ±ãŒã‚ã¾ã‚Šãªã‹ã£ãŸã®ã§ç´¹ä»‹ã—ã¾ã™ã€‚

# gqlgen ã«ã‚ˆã£ã¦ ç”Ÿæˆã•ã‚Œã‚‹å‹

ä¸‹è¨˜ã®ã‚ˆã†ãªå•†å“ã‚’ä¸€è¦§ã™ã‚‹ Query ã®å®šç¾©ã‚’ä¾‹ã«æŒ™ã’ã¾ã™ã€‚

```gql
extend type Query {
  "product ã®ä¸€è¦§ã‚’è¿”ã™ã€‚limit/offset ã§ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³å¯èƒ½ã€‚"
  products(limit: Int, offset: Int): Result!
}

union Result = ProductNodeList | ErrorNotUnauthorized | ErrorUnauthenticated

interface NodeList {
  count: Int!
  hasNext: Boolean!
}

"æˆåŠŸãƒ¬ã‚¹ãƒãƒ³ã‚¹"
type ProductNodeList implements NodeList {
  count: Int!
  hasNext: Boolean!
  products: [Product!]!
}

type Product {
  id: ID!
  age: Int!
  name: String!
}

interface Error {
  code: String!
  message: String!
}

"ç•°å¸¸ãƒ¬ã‚¹ãƒãƒ³ã‚¹ - èªè¨¼ã‚¨ãƒ©ãƒ¼"
type ErrorNotUnauthorized implements Error {
  code: String!
  message: String!
}

"ç•°å¸¸ãƒ¬ã‚¹ãƒãƒ³ã‚¹ - èªå¯ã‚¨ãƒ©ãƒ¼"
type ErrorUnauthenticated implements Error {
  code: String!
  message: String!
}
```

`query products` ã®è¿”ã‚Šå€¤ `Result` ã¯ `ProductNodeList`ã€`ErrorNotUnauthorized`ã€`ErrorUnauthenticated` ã‚’è¿”ã™ union ã§å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã‚Œã‚‰ã®å‹ã¯ã™ã¹ã¦ interface ã‚’å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚æˆåŠŸãƒ¬ã‚¹ãƒãƒ³ã‚¹ã¯ `Node` interface ã‚’ã€ç•°å¸¸ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®å ´åˆã¯ `Error` interface ã‚’å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚

## union

## interface

# ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹

# ãŠã‚ã‚Šã«
