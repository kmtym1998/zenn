---
title: '[PostgreSQL] トランザクションをコミットせずにコネクションが切れた場合の挙動'
emoji: '🗂'
type: 'tech' # tech: 技術記事 / idea: アイデア
topics: []
published: false
---

# はじめに

この記事で伝えたいことはタイトルの内容が全てです。

結構大事な事実だと思うのですが、公式ドキュメントをあたってみても明記されていなかったので記事として残しておこうと思います。

# 結論

PostgreSQL では、トランザクションをコミットせずにコネクションを切ると、該当のトランザクションは自動でロールバックされるようです。

# 検証

## コミットせずに接続を切ってみる

テーブル作る

トランザクションを開始し、INSERT を実行してコミットせずに接続を切る

再度接続し、もう一度接続してレコードに変化がないことを確認

## AUTOCOMMIT について

少し調べてみると AUTOCOMMIT という構文が見つかるが、これは PostgreSQL ECPG という拡張機能によるもの。

https://www.postgresql.jp/docs/9.5/ecpg-sql-set-autocommit.html

https://db.just4fun.biz/?PostgreSQL/auto+commit%E3%82%92off%E3%81%AB%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95

## 他の DBMS での挙動

# 参考
