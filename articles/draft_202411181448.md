---
title: "ワークフローの完了をローカルに通知する GitHub CLI 拡張機能を作りました"
emoji: "🦉"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["github", "githubcli", "go"]
published: false
---

# はじめに

私が普段開発をしていて「CI 通ったらレビュー依頼しよう」とか「デプロイが終わったら動作確認しよう」とか思っている間に、別の作業に没頭してしまうことが稀によくあります。そんな問題を解決するための GitHub CLI の拡張機能を作りました。

https://github.com/kmtym1998/gh-prowl

[README](https://github.com/kmtym1998/gh-prowl/blob/main/README.md) に書いたことを噛み砕いて書いただけなので、README を読めばいいやという方は読み飛ばしていただいて構いません。また、[GitHub CLI](https://cli.github.com/) がインストールされていることを前提にしています。

# インストール

`gh extensions install` 使って、拡張機能をインストールできます。

```
gh extensions install kmtym1998/gh-prowl
```

`gh prowl` でインストールした拡張機能を使うことができます。

```
gh prowl --help
This command allows you to monitor the status of GitHub Actions checks for a pull request (PR) or a specific branch. If used with the "--current-branch" flag, it monitors the PR associated with the current branch. Otherwise, you can select a PR or specify a branch manually.

Usage:
  gh-prowl [flags]

Flags:
  -c, --current-branch   monitor the latest check status of the current branch's PR
  -h, --help             help for gh-prowl
  -r, --ref string       monitor the latest check status of the specified ref
  -s, --silent           do not play a sound when all checks are completed
```

# 機能

ある ref (ブランチ、コミット、タグ) に紐づく Check の状態を監視します。Check とは、GitHub 上でコミットと一緒に ✅ とか ❌ とか 🟠 みたいなアイコンで何かしらのワークフローの実行結果を表示しているアレのことです。

![これが Check。完了していて成功した Check が 4 つある状態](https://storage.googleapis.com/zenn-user-upload/cd4804798959-20241213.png)
_これが Check。完了していて成功した Check が 4 つある状態_

Check が完了すると音と通知が飛び、完了したチェックのステータスを表示して終了します。

## 現在のブランチに紐付く Pull Request の Check を監視する

## Pull Request を選択し、Check を監視する

## タグやブランチを指定して Check を監視する

# 実装について

- cobra を使った
- gh extensions create を使った
- oto がビルドできなかった
- ゆえに Mac でしか動かない

# 名前の由来
